## **–£—Ä–æ–∫ 14: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ baseUrl –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –≤ Cypress**

### **–¶–µ–ª–∏**

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `baseUrl` –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ —Ç–µ—Å—Ç–∞—Ö –∏ —Ä–∞–±–æ—Ç—ã —Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ URL.
- –ü–æ–Ω–∏–º–∞—Ç—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏.
- –ü—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã Cypress, —Ç–∞–∫–∏–µ –∫–∞–∫ `cy.origin` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏.
- –í–Ω–µ–¥—Ä—è—Ç—å –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ—Å—Ç–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–¥–∞.

---

### **–†–∞–∑–±–æ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ**

#### **A. baseUrl**

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ baseUrl –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Cypress:**
   - **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:**  
     `baseUrl` ‚Äî —ç—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ Cypress, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –∫–æ—Ä–Ω–µ–≤–æ–π URL –¥–ª—è –≤—Å–µ—Ö –≤–∞—à–∏—Ö —Ç–µ—Å—Ç–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö —Ç–∏–ø–∞ `cy.visit('/')`.
   - **–ü—Ä–∏–º–µ—Ä:**
     ```javascript
     // cypress.config.js
     import { defineConfig } from 'cypress';

     export default defineConfig({
       e2e: {
         baseUrl: 'http://localhost:3000',
         // –î—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏‚Ä¶
       },
     });
     ```

2. **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è baseUrl:**
   - **–£–ø—Ä–æ—â–µ–Ω–∏–µ:**  
     –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –ø–æ–ª–Ω—ã–π URL –≤ —Ç–µ—Å—Ç–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏.
   - **–ì–∏–±–∫–æ—Å—Ç—å:**  
     –õ–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏, –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—è baseUrl (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, staging, production).
   - **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:**  
     –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ URL: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ö–æ—Å—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –æ–¥–∏–Ω —Ñ–∞–π–ª.

3. **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ baseUrl –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è baseUrl.
   - **–ü—Ä–∏–º–µ—Ä:**
     ```javascript
     // –í cypress.config.js —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º loadEnv (—Å–º. —É—Ä–æ–∫ 12)
     import { defineConfig, loadEnv } from 'vite';
     export default defineConfig(({ mode }) => {
       const env = loadEnv(mode, process.cwd(), ['VITE_']);
       return {
         e2e: {
           baseUrl: env.VITE_API_BASE_URL || 'http://localhost:3000',
           // –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏...
         }
       };
     });
     ```
   - –° —Ä–∞–∑–Ω—ã–º–∏ .env-—Ñ–∞–π–ª–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.env.development`, `.env.production`) baseUrl –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º.

---

#### **B. –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã –≤ Cypress**

1. **–ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –≤ Cypress:**
   - **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:**  
     –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã (–∏–ª–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã) –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –æ–±—â—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–ª–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É —Å—Ü–µ–Ω–∞—Ä–∏—é.
     
   - **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**  
     –í Cypress –Ω–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (`context()` ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∞–ª–∏–∞—Å –¥–ª—è `describe()`), –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ `describe()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–º—ã—Å–ª–æ–≤—ã—Ö –≥—Ä—É–ø–ø.

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
   - **–ü—Ä–∏–º–µ—Ä:**  
     –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç—ã –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏—è–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª –≤ —Å–∏—Å—Ç–µ–º—É", "–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–æ—à–µ–ª –≤ —Å–∏—Å—Ç–µ–º—É").
   - **–ü—Ä–∏–º–µ—Ä –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ describe:**
     ```javascript
     describe('Login Page @login', () => {
       beforeEach(() => {
         cy.visit('/');
       });

       describe('Validation Errors', () => {
         it('should display error when username is missing', () => {
           // –ö–æ–¥ —Ç–µ—Å—Ç–∞
         });
         it('should display error when password is missing', () => {
           // –ö–æ–¥ —Ç–µ—Å—Ç–∞
         });
       });

       describe('Successful Login', () => {
         it('should log in successfully with valid credentials', () => {
           // –ö–æ–¥ —Ç–µ—Å—Ç–∞
         });
       });
     });
     ```

      –í —Ç–µ—Ä–º–∏–Ω–∞—Ö Cypress, –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ—Å—Ç–∞ –æ–±—ã—á–Ω–æ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç —Å—Ä–µ–¥—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–µ—Å—Ç, –∞ –∏–º–µ–Ω–Ω–æ:
        - JavaScript scope, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–¥ Cypress,
        - –¥–æ–º–µ–Ω (origin) –ø–æ—Å–µ—â–∞–µ–º–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã,
        - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞: cookies, localStorage, —Å–µ—Å—Å–∏–∏ –∏ –¥–∞–∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏.
---

## –ú—É–ª—å—Ç–¥–æ–º–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Cypress

##### **–ß—Ç–æ —Ç–∞–∫–æ–µ –º—É–ª—å—Ç–¥–æ–º–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?**

–ú—É–ª—å—Ç–¥–æ–º–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å—Ü–µ–Ω–∞—Ä–∏—è–º, –∫–æ–≥–¥–∞ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ –∏–ª–∏ –ø–æ–¥–¥–æ–º–µ–Ω–∞. –≠—Ç–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω–æ –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω—é—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, OAuth-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏–Ω—ã).
- –ò–º–µ–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –¥–æ–º–µ–Ω—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ API.
- –î–æ–ª–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏–ª–∏ –≤–∏–¥–∂–µ—Ç–∞–º–∏, —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã–º–∏ –Ω–∞ –¥—Ä—É–≥–æ–º –¥–æ–º–µ–Ω–µ.

### **–¢—Ä—É–¥–Ω–æ—Å—Ç–∏ –º—É–ª—å—Ç–¥–æ–º–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

- **–ü–æ–ª–∏—Ç–∏–∫–∞ —Ç–æ–≥–æ –∂–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (Same-Origin Policy):**  
  –ë—Ä–∞—É–∑–µ—Ä—ã –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç JavaScript –≤ –¥–æ—Å—Ç—É–ø–µ –∫ —Ä–µ—Å—É—Ä—Å–∞–º —Å —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤. –≠—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö.
  
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏:**  
  –ú–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ–º –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Å—Å–∏–∏ –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏, —Ç–∞–∫ –∫–∞–∫ cookies –∏ localStorage –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –Ω–∏–º–∏.

- **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**  
  –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –≤—Ö–æ–¥ –Ω–∞ –æ–¥–Ω–æ–º –¥–æ–º–µ–Ω–µ –¥–∞–≤–∞–ª –¥–æ—Å—Ç—É–ø –Ω–∞ –¥—Ä—É–≥–æ–º) ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –≤ —Ç–µ—Å—Ç–∞—Ö —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Å–æ–±–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞.


#### **C. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ Cypress-–∫–æ–º–∞–Ω–¥—ã: cy.origin –∏ cy.session**

1. **cy.origin: –†–∞–±–æ—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏**
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
     `cy.origin` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥—Ä—É–≥–æ–≥–æ origin (–¥–æ–º–µ–Ω–∞). –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –µ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞).
   - **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
     ```javascript
     // –ü—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –¥–æ–º–µ–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è
     cy.origin('https://external-domain.com', () => {
       cy.get('[data-testid="external-login"]').click();
     });
     ```
   - **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**  
     –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, —Å–æ—Ö—Ä–∞–Ω—è—è –≥—Ä–∞–Ω–∏—Ü—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

    #### –í–∞–∂–Ω–æ—Å—Ç—å `cy.origin()` –ø—Ä–∏ –º—É–ª—å—Ç–¥–æ–º–µ–Ω–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

    **–ß—Ç–æ —Ç–∞–∫–æ–µ `cy.origin()`?**  
    `cy.origin()` ‚Äî —ç—Ç–æ Cypress-–∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥—Ä—É–≥–æ–≥–æ –¥–æ–º–µ–Ω–∞, –æ—Ç–ª–∏—á–Ω–æ–≥–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ `baseUrl`. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏.

    **–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**

    - **–û–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π Same-Origin Policy:**  
      –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –Ω–∞ –¥—Ä—É–≥–æ–º –¥–æ–º–µ–Ω–µ. –ë–µ–∑ `cy.origin()` Cypress –≤—ã–¥–∞—Å—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º –¥—Ä—É–≥–æ–≥–æ –¥–æ–º–µ–Ω–∞.

    - **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π:**  
      –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∏–ª–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –¥—Ä—É–≥–∏–º –¥–æ–º–µ–Ω–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–ª–∞—Ç—ë–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–ª–∏ OAuth-–ø—Ä–æ–≤–∞–π–¥–µ—Ä), `cy.origin()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö.

    - **–ë–µ—Å—à–æ–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**  
      –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—É—Ç—å —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

    **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `cy.origin()`:**

    –î–æ–ø—É—Å—Ç–∏–º, –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —Å–µ—Ä–≤–∏—Å –Ω–∞ `https://auth.example.com`, –∞ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `http://localhost:3000`.

    ```javascript
    // –í —Ñ–∞–π–ª–µ —Ç–µ—Å—Ç–∞ –¥–ª—è –º—É–ª—å—Ç–¥–æ–º–µ–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    describe('Multidomain Login Test', () => {
      it('should handle login via a third-party authentication service', () => {
        // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        cy.visit('/login');

        // –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –¥–æ–º–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        cy.get('[data-testid="login-with-oauth"]').click();

        // –ò—Å–ø–æ–ª—å–∑—É–µ–º cy.origin() –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ–º–µ–Ω–∞
        cy.origin('https://auth.example.com', () => {
          // –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ–º —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
          cy.get('[data-testid="auth-username"]').type('externalUser');
          cy.get('[data-testid="auth-password"]').type('externalPass');
          cy.get('[data-testid="auth-submit"]').click();
        });

        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        cy.url().should('include', '/dashboard');
        cy.get('[data-testid="welcome-message"]').should('contain', 'Welcome');
      });
    });
    ```



### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –¥–ª—è –º—É–ª—å—Ç–¥–æ–º–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä: –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏**

–î–æ–ø—É—Å—Ç–∏–º, –≤ —Ç–µ—Å—Ç–µ –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω—É–∂–Ω–æ –ø–æ—Å–µ—Ç–∏—Ç—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–π —Å–∞–π—Ç –Ω–∞ –¥—Ä—É–≥–æ–º –¥–æ–º–µ–Ω–µ:

```javascript
describe('Multidomain Navigation', () => {
  it('should navigate from the main app to the marketing site', () => {
    cy.visit('/login');
    cy.get('[data-testid="login-with-oauth"]').click();

    cy.origin('https://auth.example.com', () => {
      cy.get('[data-testid="auth-username"]').type('externalUser');
      cy.get('[data-testid="auth-password"]').type('externalPass');
      cy.get('[data-testid="auth-submit"]').click();
    });

    // –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ –¥—Ä—É–≥–æ–º –¥–æ–º–µ–Ω–µ
    cy.origin('https://marketing.example.com', () => {
      cy.visit('/special-offers');
      cy.get('[data-testid="offer-banner"]').should('be.visible');
    });
  });
});
```
---

#### **D. –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è**

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å baseUrl –∏ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã:**
   - **–ó–∞–¥–∞–Ω–∏–µ:**  
     –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–µ—Å—Ç—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `cy.visit('/')` –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º `baseUrl` –≤ `cypress.config.js`. 
   - **–¶–µ–ª—å:**  
     –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∏ —á—Ç–æ –¥–ª—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π baseUrl.

3. **–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å cy.origin –∏ cy.session:**
   - **–ó–∞–¥–∞–Ω–∏–µ:**  
     –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –¥—Ä—É–≥–æ–π –¥–æ–º–µ–Ω —Å –ø–æ–º–æ—â—å—é `cy.origin` (—Å–∏–º—É–ª–∏—Ä—É–π—Ç–µ –≤–Ω–µ—à–Ω—é—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é).
   - **–¶–µ–ª—å:**  
     –ü–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –º—É–ª—å—Ç–¥–æ–º–µ–Ω–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –∏ —É–º–µ–Ω—å—à–∏—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É —Å—Ä–µ–¥—ã.

---

#### **E. –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Cypress**

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ baseUrl –≤ —Ç–µ—Å—Ç–µ:**
```javascript
describe('Home Page Navigation', () => {
  it('should load the login page using relative URL', () => {
    cy.visit('/login'); // –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è baseUrl + /login
    cy.get('[data-testid="page-title"]').should('contain', 'Login');
  });
});
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ cy.origin:**
```javascript
describe('Cross-Origin Login', () => {
  it('should perform login on external domain', () => {
    cy.origin('https://external.example.com', () => {
      cy.get('[data-testid="external-login"]').click();
    });
  });
});
```

---

### **–í–æ–∑–º–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –æ—Ç–≤–µ—Ç—ã**

1. **Q:** *–ö–∞–∫ baseUrl –ø–æ–º–æ–≥–∞–µ—Ç —É–ø—Ä–æ—Å—Ç–∏—Ç—å –Ω–∞—à–∏ —Ç–µ—Å—Ç—ã?*  
   **A:** –ù–∞—Å—Ç—Ä–æ–∏–≤ baseUrl –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –≤ `cy.visit()`, –¥–µ–ª–∞—è –≤–∞—à–∏ —Ç–µ—Å—Ç—ã —á–∏—â–µ –∏ –ø—Ä–æ—â–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

2. **Q:** *–ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –≤ Cypress –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã?*  
   **A:** –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã, —Ä–µ–∞–ª–∏–∑—É–µ–º—ã–µ —Å –ø–æ–º–æ—â—å—é –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö `describe()`, –ø–æ–º–æ–≥–∞—é—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ —Ä–∞–∑–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å—Ü–µ–Ω–∞—Ä–∏—è–º). –≠—Ç–æ –¥–µ–ª–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ—Å—Ç–æ–≤ –±–æ–ª–µ–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∏ –æ–±–ª–µ–≥—á–∞–µ—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫—É.

3. **Q:** *–î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è cy.origin?*  
   **A:** `cy.origin` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥—Ä—É–≥–æ–≥–æ –¥–æ–º–µ–Ω–∞. –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Å—Ç–æ—Ä–æ–Ω–Ω—è—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.

5. **Q:** *–ú–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å baseUrl –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤?*  
   **A:** –•–æ—Ç—è baseUrl ‚Äî —ç—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–≥–æ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö —á–µ—Ä–µ–∑ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π URL –≤ `cy.visit()`. –û–¥–Ω–∞–∫–æ –ª—É—á—à–µ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ baseUrl –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è, –µ—Å–ª–∏ –Ω–µ—Ç –æ—Å–æ–±—ã—Ö –ø—Ä–∏—á–∏–Ω –¥–ª—è –∏–Ω–æ–≥–æ.

6. **Q:** *–ö–∞–∫–∏–µ —Å–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –≤ Cypress?*  
   **A:** –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç—ã —Å –ø–æ–º–æ—â—å—é –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ `describe()` —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ö—É–∫–∏ (beforeEach/afterEach) –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∏ –æ—á–∏—Å—Ç–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, —á—Ç–æ–±—ã —Ç–µ—Å—Ç—ã –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º–∏.

---

### **–¢–∏–ø–∏—á–Ω–∞—è –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**

```javascript
describe('Cypress lost value', () => {
  var value1
  var value2;
  
  it('10 - navigate and login to domain1 and save value to variable', () => {
    cy.visit('https://domain1.com');
    cy.loginDomain1().then((value) => {
      value1 = value
    })
    value2 = 100
  });

  it('20 - navigate and login to domain2 and with value1 variable', () => {
    cy.visit('https://domain2.com');
    cy.log(value2) 
    cy.loginDomain2(value1)
  })
});
```

#### –ü–æ—á–µ–º—É Cypress —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å—ë –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–æ–º–µ–Ω–∞?

–ü—Ä–∏—á–∏–Ω–∞ ‚Äî **–ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞**:

##### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

–ö–æ–≥–¥–∞ –≤—ã –¥–µ–ª–∞–µ—Ç–µ –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ:

```javascript
cy.visit('https://domain1.com');
// –∫–∞–∫–∏–µ-—Ç–æ –¥–µ–π—Å—Ç–≤–∏—è...
cy.visit('https://domain2.com');
// —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç –∏–ª–∏ —Ç–µ—Ä—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ...
```

Cypress **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –±—Ä–∞—É–∑–µ—Ä–∞** –ø—Ä–∏ —Å–º–µ–Ω–µ origin.

### üîπ –ü–æ—á–µ–º—É?

–ò–∑-–∑–∞ **Same-Origin Policy (SOP)** –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö:

* JavaScript —Å –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è (`https://domain1.com`) –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –¥—Ä—É–≥–æ–≥–æ (`https://domain2.com`).
* Cypress —Å–æ–±–ª—é–¥–∞–µ—Ç —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ, —á—Ç–æ–±—ã **–∑–∞—â–∏—Ç–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤** –∏ –∏–∑–±–µ–∂–∞—Ç—å **—É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏** –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏.

–ö–æ–≥–¥–∞ Cypress –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —Å–º–µ–Ω—É origin:

* –û–Ω **—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç iframe —Ç–µ—Å—Ç–∞**
* –í—Å–µ **–≤ –ø–∞–º—è—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**, DOM, cookies –∏ JS-–∫–æ–Ω—Ç–µ–∫—Å—Ç **–æ—á–∏—â–∞—é—Ç—Å—è**
* –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–∑–æ–ª—è—Ü–∏—é —Ç–µ—Å—Ç–æ–≤ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

---

#### –ü—Ä–∏–º–µ—Ä: –ø–æ—á–µ–º—É –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `undefined` –ø—Ä–∏ —Å–º–µ–Ω–µ –¥–æ–º–µ–Ω–∞

```javascript
let token;

it('gets token from domain1', () => {
  cy.visit('https://domain1.com');
  cy.getCookie('authToken').then((cookie) => {
    token = cookie.value;
  });
});

it('tries to use token on domain2', () => {
  cy.visit('https://domain2.com');
  cy.log(token); // üî¥ token –∑–¥–µ—Å—å undefined
});
```

##### –í —á–µ–º –ø—Ä–æ–±–ª–µ–º–∞?

* –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `token` –æ–±—ä—è–≤–ª–µ–Ω–∞ **–Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Ç–µ—Å—Ç–∞**.
* –ö–æ–≥–¥–∞ Cypress –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω, –æ–Ω –æ—á–∏—â–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
* –ü–æ—ç—Ç–æ–º—É `token` —Ç–µ—Ä—è–µ—Ç—Å—è ‚Äî Cypress –Ω–∞—á–∏–Ω–∞–µ—Ç —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞.


–í Cypress –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç (`it`-–±–ª–æ–∫) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –∏–∑–æ–ª—è—Ü–∏–∏. –ó–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ, –Ω–µ–Ω–∞–¥–µ–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—É—Ç—Å—è –≤ –¥—Ä—É–≥–æ–π. –î–∞–∂–µ –µ—Å–ª–∏ –æ–±—ä—è–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `var value1`), Cypress —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∏ —á—Ç–æ–±—ã —Ç–µ—Å—Ç—ã –Ω–µ –∏–º–µ–ª–∏ —Å–∫—Ä—ã—Ç—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∫–æ–º–∞–Ω–¥—ã Cypress –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ `value1` –≤ –ø–µ—Ä–≤–æ–º —Ç–µ—Å—Ç–µ –º–æ–∂–µ—Ç –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –∏–ª–∏ –±—ã—Ç—å —Å–±—Ä–æ—à–µ–Ω–æ –∫ –Ω–∞—á–∞–ª—É –≤—Ç–æ—Ä–æ–≥–æ.

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

- **–ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤:**  
  Cypress –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–∞–∂–¥—ã–π `it`-–±–ª–æ–∫ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏.

- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥:**  
  –í –ø–µ—Ä–≤–æ–º —Ç–µ—Å—Ç–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `.then()` –º–æ–∂–µ—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è, –∫–æ–≥–¥–∞ –≤—Ç–æ—Ä–æ–π —Ç–µ—Å—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è ‚Äî –¥–µ–ª–æ –≤ –º–µ—Ö–∞–Ω–∏–∑–º–µ –∏–∑–æ–ª—è—Ü–∏–∏.

- **–ü—Ä–∞–∫—Ç–∏–∫–∞:**  
  –í–º–µ—Å—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã Cypress, —Ç–∞–∫–∏–µ –∫–∞–∫ `cy.session()`, –∏–ª–∏ –æ–±—ä–µ–¥–∏–Ω—è–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –æ–¥–∏–Ω —Ç–µ—Å—Ç. –î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ closures –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ Cypress.

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞:**

```javascript
describe('Cypress lost value', () => {
  var value1;
  
  it('10 - navigate and login to domain1 and save value to variable', () => {
    cy.visit('https://domain1.com');
    cy.loginDomain1().then((value) => {
      value1 = value // value1 –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –∑–¥–µ—Å—å
    });
    value2 = 100 // value1 –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –∑–¥–µ—Å—å
  });

  it('20 - navigate and login to domain2 and with value1 variable', () => {
    cy.visit('https://domain2.com');
    // –ó–¥–µ—Å—å, –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–∞, value1 –∏ value2 –±—É–¥—É—Ç undefined –∏–∑-–∑–∞ —Å–±—Ä–æ—Å–∞
    cy.log(value2) //-> value2 is undefined
    cy.loginDomain2(value1); //-> value1 is undefined
  });  
});
```

–í–æ –≤—Ç–æ—Ä–æ–º —Ç–µ—Å—Ç–µ `value1` ‚Äï —ç—Ç–æ `undefined`, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- **–ò–∑–æ–ª—è—Ü–∏—è:** –ö–∞–∂–¥—ã–π –±–ª–æ–∫ `it` –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω.
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å:** –î–∞–∂–µ –µ—Å–ª–∏ value1 –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è, –æ–Ω–æ –Ω–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –≤–æ –≤—Ç–æ—Ä–æ–º —Ç–µ—Å—Ç–µ –∏–∑-–∑–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏.


–ü–æ–Ω–∏–º–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–∑–æ–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ Cypress, –≤—ã —Å–º–æ–∂–µ—Ç–µ —Å—Ç—Ä–æ–∏—Ç—å —Ç–µ—Å—Ç—ã, –Ω–µ –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.


–ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏ ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏ ‚Äî –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ Cypress –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –∏–∑–æ–ª–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π –±–ª–æ–∫ `it()`. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤, –Ω–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ, –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –¥—Ä—É–≥–æ–≥–æ. –í–æ—Ç –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ç–∞–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏:

### **–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏**

1. **–î–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏:**  
   –í –∏–¥–µ–∞–ª–µ –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ª–æ–≥–∏–Ω–∞ –Ω–∞ –æ–¥–Ω–æ–º –¥–æ–º–µ–Ω–µ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ, –æ–±—ä–µ–¥–∏–Ω–∏—Ç–µ —à–∞–≥–∏ –≤ –æ–¥–∏–Ω —Ç–µ—Å—Ç, —á—Ç–æ–±—ã –∑–Ω–∞—á–µ–Ω–∏–µ –±—ã–ª–æ –¥–æ—Å—Ç—É–ø–Ω–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

2. **–û–±—ä–µ–¥–∏–Ω—è–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**  
   –ï—Å–ª–∏ –æ–±–∞ –¥–æ–º–µ–Ω–∞ ‚Äî —á–∞—Å—Ç—å –æ–¥–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Ü–µ–ø–æ—á–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏–Ω –Ω–∞ domain1, –∞ –∑–∞—Ç–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ domain2), –æ–±—ä–µ–¥–∏–Ω—è–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –æ–¥–∏–Ω —Ç–µ—Å—Ç. –¢–∞–∫ —Ç–µ—Å—Ç –±—É–¥–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω—ã–º.

4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é cy.task():**  
   –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é –∑–∞–¥–∞—á—É, —á—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –≤ –ø–∞–º—è—Ç—å Node.js) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –¥—Ä—É–≥–∏—Ö —Ç–µ—Å—Ç–∞—Ö. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏, –¥–∞–∂–µ –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏.

#### **–ü—Ä–∏–º–µ—Ä—ã —Ä–µ—à–µ–Ω–∏–π**

##### **–†–µ—à–µ–Ω–∏–µ 1: –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–∏–Ω —Ç–µ—Å—Ç**

–ï—Å–ª–∏ —Å—Ü–µ–Ω–∞—Ä–∏–π –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å domain1 –Ω–∞ domain2 ‚Äî —á–∞—Å—Ç—å –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—É—Ç–∏, –æ–±—ä–µ–¥–∏–Ω–∏—Ç–µ –∏—Ö:
  
```javascript
describe('Multidomain Login Flow', () => {
  it('logs in on domain1 and uses the value on domain2', () => {
    // –®–∞–≥ 1: –∑–∞—Ö–æ–¥–∏–º –Ω–∞ domain1 –∏ –ø–æ–ª—É—á–∞–µ–º value
    cy.visit('https://domain1.com');
    cy.loginDomain1().then((value) => {
      // value –¥–æ—Å—Ç—É–ø–Ω–æ –∑–¥–µ—Å—å
      // –®–∞–≥ 2: –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ domain2 —á–µ—Ä–µ–∑ cy.origin()
      cy.visit('https://domain2.com');
      cy.origin('https://domain2.com', () => {
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ domain2
        cy.loginDomain2(value).should('succeed');
      });
    });
  });
});
```

##### **–†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å cy.task() –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏**

–ï—Å–ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ç–µ—Å—Ç—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é –∑–∞–¥–∞—á—É –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –≤–Ω–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–∞–º–æ–≥–æ —Ç–µ—Å—Ç–∞:

1. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–¥–∞—á—É –≤ cypress.config.js –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ:**

```javascript
// –í cypress.config.js –∏–ª–∏ —Ñ–∞–π–ª–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
module.exports = defineConfig({
  e2e: {
    setupNodeEvents(on, config) {
      let sharedValue; // –•—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –ø–∞–º—è—Ç–∏

      on('task', {
        saveValue(value) {
          sharedValue = value;
          return null;
        },
        getValue() {
          return sharedValue;
        }
      });
      return config;
    }
  }
});
```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ cy.task() –≤ —Ç–µ—Å—Ç–∞—Ö:**

```javascript
describe('Multidomain Flow with Persisted Value', () => {
  it('saves a value from domain1', () => {
    cy.visit('https://domain1.com');
    cy.loginDomain1().then((value) => {
      cy.task('saveValue', value);
    });
  });

  it('retrieves the value and uses it on domain2', () => {
    cy.visit('https://domain2.com');
    cy.task('getValue').then((value) => {
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ domain2
      cy.loginDomain2(value).should('succeed');
    });
  });
});
```


##### **–†–µ—à–µ–Ω–∏–µ 3: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª**

1. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–¥–∞—á–∏ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ setupNodeEvents:**

   –í –≤–∞—à–µ–º `cypress.config.js` (–∏–ª–∏ –≤ —Ñ–∞–π–ª–µ, –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–º –∏–º) –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞. –ù–∞–ø—Ä–∏–º–µ—Ä:

   ```javascript
   const fs = require('fs');
   const path = require('path');

   module.exports = defineConfig({
     e2e: {
       setupNodeEvents(on, config) {
         // –ó–∞–¥–∞—á–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ñ–∞–π–ª
         on('task', {
           writeValue({ filename, value }) {
             const filePath = path.join(__dirname, filename);
             fs.writeFileSync(filePath, JSON.stringify(value));
             return null;
           },
           // –ó–∞–¥–∞—á–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞
           readValue({ filename }) {
             const filePath = path.join(__dirname, filename);
             if (fs.existsSync(filePath)) {
               const data = fs.readFileSync(filePath, 'utf8');
               return JSON.parse(data);
             }
             return null;
           }
         });
         return config;
       },
       baseUrl: 'http://localhost:3000'
     },
     env: {
       // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ...
     }
   });
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö:**

   –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `cy.task('writeValue', { filename, value })` –≤ –æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è, –∞ `cy.task('readValue', { filename })` ‚Äî –≤ –¥—Ä—É–≥–æ–º –¥–ª—è –µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è.

   **–ü—Ä–∏–º–µ—Ä:**

   ```javascript
   describe('Store and Retrieve Value from File', () => {
     it('should save a value from domain1 to a file', () => {
       cy.visit('https://domain1.com');
       // –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, cy.loginDomain1() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
       cy.loginDomain1().then((value) => {
         // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª "sharedValue.json"
         cy.task('writeValue', { filename: 'cypress/sharedValue.json', value });
       });
     });

     it('should retrieve the value from file and use it on domain2', () => {
       cy.visit('https://domain2.com');
       cy.task('readValue', { filename: 'cypress/sharedValue.json' }).then((value) => {
         // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ; —Ç–µ–ø–µ—Ä—å –æ–Ω–æ –Ω–µ undefined
         cy.loginDomain2(value).should('succeed');
       });
     });
   });
   ```

  ##### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª–µ:**

  - **–°–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å:**  
    –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö –∏–ª–∏ —Å–µ—Å—Å–∏—è—Ö.
    
  - **–û—Ç–ª–∞–¥–∫–∞:**  
    –ú–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –±—ã–ª–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ.

  - **–ò–∑–æ–ª—è—Ü–∏—è:**  
    –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∏–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–Ω—ã–º–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –Ω–∞–±–æ—Ä–∞–º–∏.

  ### **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**

  - **–ó–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞ I/O:**  
    –§–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–∞–º—è—Ç—å—é.
    
  - **–°–ª–æ–∂–Ω–æ—Å—Ç—å:**  
    –ü–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –æ—á–∏—â–∞—Ç—å —Ñ–∞–π–ª—ã –∏ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º.

  - **–í–æ–∑–º–æ–∂–Ω—ã–µ —Ñ–ª–∞–∫–∏:**  
    –ü—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å —É—Å–ª–æ–≤–∏—è –≥–æ–Ω–∫–∏. –í–∞–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —á–∏—Å—Ç–∫—É –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é.

  ### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

  - **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤:**  
    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
    
  - **–û—á–∏—Å—Ç–∫–∞:**  
    –£–¥–∞–ª—è–π—Ç–µ/–æ—á–∏—â–∞–π—Ç–µ —Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
    
  - **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**  
    –ü—Ä–æ–¥—É–º–∞–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω), —á—Ç–æ–±—ã —Ç–µ—Å—Ç—ã –ø–∞–¥–∞–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `cy.task()` ‚Äî —ç—Ç–æ –Ω–∞–¥–µ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–ª–∏ `cy.session()`) –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –¥–æ–º–µ–Ω–æ–≤ –∏–ª–∏ —Å–µ—Å—Å–∏–π, –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –≤–Ω–µ —Å–∞–º–æ–≥–æ Cypress.